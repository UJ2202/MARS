
================================================================================
  CMBAGENT STAGES 1-9 COMPREHENSIVE TEST SUITE
================================================================================

Start Time: 2026-01-15T09:04:14.720366
Database: /home/ujjwal/.cmbagent/cmbagent.db

================================================================================
  STAGE 1-2: FOUNDATION (AG2 Upgrade + Database)
================================================================================

  Testing: AG2 Import and Version... ✓ PASS

  Testing: CMBAgent Utils Import... <IPython.core.display.Image object>
<IPython.core.display.Markdown object>
✓ PASS

  Testing: Database Initialization... ✓ PASS

  Testing: Database Models Import... ✓ PASS

  Testing: Session Repository CRUD... ✓ PASS

  Testing: Workflow Repository CRUD... ✓ PASS

  Testing: Session Isolation... ✓ PASS

================================================================================
  STAGE 3-4: STATE MACHINE + DAG SYSTEM
================================================================================

  Testing: State Enumerations... ✓ PASS

  Testing: State Machine Transitions... ✓ PASS

  Testing: State History Tracking... ✓ PASS

  Testing: Workflow Controller (Pause/Resume)... ✓ PASS

  Testing: DAG Builder... ✓ PASS

  Testing: Topological Sort... ✓ PASS

  Testing: DAG Visualizer... ✓ PASS

================================================================================
  STAGE 5: WEBSOCKET PROTOCOL
================================================================================

  Testing: WebSocket Event Types... ✓ PASS

  Testing: Event Queue... ✓ PASS

  Testing: Event Serialization... ✓ PASS

================================================================================
  STAGE 6: HITL APPROVAL SYSTEM
================================================================================

  Testing: Approval Types... ✓ PASS

  Testing: Approval Manager... ✓ PASS

  Testing: Approval Resolution... ✓ PASS

================================================================================
  STAGE 7: CONTEXT-AWARE RETRY MECHANISM
================================================================================

  Testing: Error Pattern Analyzer... ✓ PASS

  Testing: Retry Context Creation... ✓ PASS

  Testing: Retry Context Manager... ✗ FAIL
    Error: 'NoneType' object has no attribute 'get'

  Testing: Retry Metrics... ✓ PASS

================================================================================
  STAGE 8: PARALLEL EXECUTION
================================================================================

  Testing: Dependency Graph... ✓ PASS

  Testing: Work Directory Manager... ✓ PASS

  Testing: Resource Manager... ✓ PASS

  Testing: Execution Configuration... ✓ PASS

================================================================================
  STAGE 9: BRANCHING AND PLAY-FROM-NODE
================================================================================

  Testing: Branch Manager... ✓ PASS

  Testing: Branch Comparator... ✓ PASS

  Testing: Play-from-Node Executor... ✓ PASS

================================================================================
  TEST EXECUTION SUMMARY
================================================================================

Total Tests: 31
Passed: 30 ✓
Failed: 1 ✗
Skipped: 0

Failed Tests:
  - Retry Context Manager: 'NoneType' object has no attribute 'get'

Pass Rate: 96.8%

✗ SOME TESTS FAILED
================================================================================
